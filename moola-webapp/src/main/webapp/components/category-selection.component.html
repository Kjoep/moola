<input type="text" ng-model="vm.filter" ng-focus="vm.show()" ng-blur="vm.hide()" select-on-click
    ng-keydown="vm.filterKeyDown($event)" ng-keyup="vm.filterKeyUp($event)">
<div class="categorySelection popover" ng-show="vm.active">
    <div class="options-section">
        <div class="option" ng-class="{'active': vm.selectedIndex == -1}" ng-show="vm.allowNew()">
            <span class="label">{{vm.filter}}</span>
            <span class="description">create as category</span>
        </div>
        <div ng-repeat="option in vm.filteredOptions" 
             data-categoryid="{{option.id}}" class="option" ng-class="{'active': $index == vm.selectedIndex}"
             ng-click="vm.applyOption(option)">
            <span class="label">
                <span class="color" style="background-color: {{option.color.bg}}; color: {{option.color.fg}}">A</span>            {{option.name}}
            </span>
        </div>
    </div>
</div>
